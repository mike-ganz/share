<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orderly Redirect</title>
</head>
<body>
    <script>
        function openLink() {
            // Base deep link
            const baseDeepLink = 'orderly://';
            const url1 = 'https://apps.apple.com/us/app/orderly-returns-assistant/id6452804073'; // For iOS and Mac
            const url2 = 'https://play.google.com/store/apps/details?id=com.orderly.android&pli=1'; // For Android
            const url3 = 'https://www.joinorderly.com'; // For Others

            // Get current URL
            const currentUrl = new URL(window.location.href);
            const path = currentUrl.pathname.slice(1); // Remove the leading "/"
            const searchParams = new URLSearchParams(currentUrl.search);

            // Construct deep link URL
            let deepLink = baseDeepLink;
            if (path) {
                deepLink += path; // Add path to base deep link
                if (Array.from(searchParams).length > 0) {
                    deepLink += '?' + searchParams; // Add query parameters if any
                }
            }

            // Navigate to the deep link if path is provided
            if (path) {
                window.location = deepLink;
                checkFallback();
            } else {
                // No path provided, go directly to a fallback URL based on user agent
                checkFallback();
            }
        }

        function checkFallback() {
            setTimeout(function() {
                // Check the platform and redirect accordingly
                var userAgent = navigator.userAgent || navigator.vendor || window.opera;
                if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                    window.location = url1; // iOS devices
                } else if (/Mac/i.test(userAgent)) {
                    window.location = url1; // Mac OS
                } else if (/android/i.test(userAgent)) {
                    window.location = url2; // Android devices
                } else {
                    window.location = url3; // Other devices
                }
            }, 2000);
        }

        window.onload = openLink;
    </script>
</body>
</html>

